<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>variational Energy-Principles - Newtonian to Lagrangian to Hamilton-Jacobi</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
        }
        p {
            line-height: 1.6;
        }
        .equation {
            text-align: center;
            margin: 20px 0;
        }
        .equation span {
            font-family: "Courier New", monospace;
            background-color: #f9f9f9;
            display: inline-block;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .highlight {
            color: red;
        }
        .author-date {
            font-style: italic;
            margin-bottom: 20px;
        }
    </style>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

    <h1>Energy-Principles</h1>
    
    <h2>Introduction</h2>
    <p> With this post i want so summarize the variational formulation of mechanics and mathematical analysis that arises from it.
        Upon reading this blog-post, you should have an understanding of how the variational formulation of mechanics in terms 
        of a scalar function (the lagrangian, hamiltonian, or generating function) arise from (work) principles of newtonian mechanics.
        This formulation is the basis for Hamiltonian mechanics and the Hamilton-Jacobi theory.
        It is restricted to the fairly broad class of systems subject to forces, derivable from a single scalar function (monogenic forces).
        Examples of these forces are known as conservative forces, however, by an extenstion of the state-space also non-conservative
        forces and time-dependent energy-evolutions can be made monogenic. 
        The details and intricacies will become clearer in the following.
    </p>







    <h2>Newtons equation, virtual work and D'Alemberts principle</h2>
    <p>We will assume that the reader is familiar with the famous equation of motion in newtonian mechanics</p>
    <div class="equation">
        $$
               F=ma = m\dot{v} = m\ddot{r}
        $$
    </div>
    where \( F \) is the force, \( m \) is the mass of the particle and \( a =\dot{v}= \ddot{r}\) is the acceleration ins \(3D\) position space.
    The equation of motion is a second order differential equation, which can be solved by specifying the initial conditions of the system.
    The solution is the trajectory \( r(t) \)  of the particle in position space. 
    An important notion that arises is that of an equilibrium point, which is a point in position space
    where the force (and thus the acceleration) vanishes. Here, we consider a free particle, 
    i.e. a particle that is not subject to any constraints and can be moved in arbitrary directions. 
    Assume the particle were constrained to be located on a plane (e.g. a ball on a table). 
    We enforce the constraint by \( f(r) = f(x,y,z) = 0 \).
    The ball is in equilibrium (no acceleration occurs) eventhough the force of gravity is acting on it. 
    This is because a reactive force is acting on the ball, which cancels out the force of gravity. 
    We have
    <div class="equation">
        $$
        F + R = ma
        $$
    </div>
    where \( R \) is the reactive force.
    Let us introduce the work-function 
    <div class="equation">
        $$
        \delta w =  F \delta r
        $$,
    </div>
    where \( \delta r \) is the virtual displacement of the particle. 
    It corresponds to any arbitrary variation of \( r \). The quantity \(dr\) is but a special type of variation.
    Thus, whenever \( \delta \) is used, the reader might replace it with \( d \) to obtain the special variation.
    The difference is that \( \delta \) represents any arbitrary variation not necessarily consistent with the actual motion, 
    wheras \( d \) is consistent. Intuitively speaking, the virtual displacement is a small displacement that is not necessarily real,
    and virtual work is the work done by the forces on this virtual displacement. 
    It does not necessarily correspond to the real work that is being done. 
    \( dw \) is a the work performed by a system on a real infitesimal displacement \(dr\), 
    \(\delta w \) is a (virtual) work done by (imagined) infitesimal (virtual) displacement \( \delta r \). 
    Thus the variation is merely a generalization of an infinitesimal change. 
    Generally speaking, the real displacement is tied to a specific parameterization while the variational displacement is not.
    In equilibrium we have
    <div class="equation">
        $$
        \delta w = (F + R - ma) \delta r = 0 
        $$.
   </div>
   We will consider that the reactive forces \(R\) are ideal, in the sense that they do not do any work, i.e. \(R \delta r = 0 \).
   If we use the special variation \(\delta r = dr\), this condition means that the reactive forces are orthogonal to the motion. 
   For more general variations, the ideality condition states that the reactive forces are orthogonal to all allowed variations.
   This assumption of ideal reactive forces holds for many systems. 
   It fails for example for frictional forces, deformations, non-holonomic (velocity dependent) constraints, 
   contacts with slip-stick conditions and non-equilibrium systems. 
   Although, this might seem like a big restriction, assuming ideality is very powerful and used in many models 
   (similar to how most mathematical models are friction-free and offer deep insight nontheless).  
   Under this assumption we obtain the following equation of equilibrium
   <div class="equation">
    $$
    \delta w = (F - ma) \delta r = 0
    $$,
   </div>
   which is known as D'Alemberts principle. 
   This principle makes the remarkable statement that a system is in equilibrium if one adds the inertial forces to the impressed forces.
   It can be interpreted as a change of perspective. 
   Instead of considering the acceleration due to an impressed force from the perspective of a fixed observer, we take the perspective of the moving particle.
   For this moving observer, the particle appears at rest at all times and experiencing impressed forces and inertial forces. 
   Let us denote    
   <div class="equation">
    $$
    \sum_h Q_h \delta q_h = \sum_i F_i  \delta r_i = 0
    $$,
   </div>
   as the work of the impressed forces described as displacements in the coordinates \(r\) and \(q\) respectively.
   The coordinates \(q\) are the generalized coordinates of the system and correspond to its degrees of freedom.
   We write \(x_i = f_{x_i}(q_1,...,q_n)\), \(y_i = f_{y_i}(q_1,...,q_n)\) and \(z_i = f_{z_i}(q_1,...,q_n)\) 
   for the position of the \(i-th\) particle in the generalized coordinates.
   Important quantities are the kinetic energy \(T\) and potential energy \(V\) in generalized coordinates
    <div class="equation">
     $$
     T = \frac{1}{2} \sum_i\sum_j a_{i,j}(q,t) \dot{q_i}\dot{q_j} +  \sum_i b_i(q,t) \dot{q_i} + \frac{1}{2} c(q,t)
     $$
    </div>
    and 
    <div class="equation">
    $$
    V = \sum_i V_i = \sum_i V_i(q_1,...,q_n, \dot{q}_1,...,\dot{q}_n)
    $$
    </div>
   We might assume that the real work done by the forces corresponds to the directional derivation of a scalar function \(U = -V \).
   \(V\) is often called the potential energy and corresponds to the negative work that can be done by a particle. 
   If we replace \(\delta \) by \(d\) and assume that the scalar function depends only on positions, 
   we obtain \(F = - \nabla_r  V \) and  \(Q_h = - \nabla_q  V \). 
   This is the definition of conservative forces and the corresponding work. 
   \(Q_h\) is the generalized force and \(F\) is the force in position space.
   Forces which are derivable from a single scalar function are called monogenic. 
   If the scalar function is only position dependent, they are called conservative. 
   Under the assumption of monogenic forces we can write the equation of motion as
   <div class="equation">
    $$
    \delta w = F\delta r - ma\delta r  = - \delta V -  ma\delta r 
    $$.
   </div>
  Replacing \(\delta r \) by \(dr\), we obtain 
  <div class="equation">
    $$
    dw =  d V +  madr = d V +  m a v dt = d V + \frac{1}{2} \frac{d}{dt} mv^2 dt = d ( V+T ) = 0
    $$,
   </div>
   which is the well known theorem of energy conservation for conservative systems.
   Consider \(\delta r = \frac{\partial r}{\partial q} \), then
   <div class="equation">
    $$
    \delta w = F\frac{\partial r}{\partial q} - ma\frac{\partial r}{\partial q} = 0
    $$,
   </div>
   leads to 
   <div class="equation">
    $$
     F\frac{\partial r}{\partial q} = ma\frac{\partial r}{\partial q} = Q_h
    $$
   </div> 
   in equilibrium. 
   Note, that for conservative forces \(F = - \frac{\delta V}{\delta r} \) and  \(Q_h = - \frac{\delta V}{\delta q} \), 
   so that \(Q_h = F \frac{\delta r}{\delta q} \) 
   or \(Q_h = F \frac{\partial r}{\partial q} \) in the specific case of actual (vs. virtual displacements).
   Consider,
   <div class="equation">
    $$
    ma\delta r = m \frac{d}{dt} (v\delta r) = m \frac{d}{dt} (v \delta r ) -   m v \frac{d}{dt} (\delta r)
    $$
   </div> 
   and use actual displacements \(\delta r = \frac{\partial r}{\partial q} \).
   For these actual displacements we have   
   <div class="equation">
    $$
    \frac{\partial r}{\partial q} = \frac{\partial vdt}{\partial \dot{q}dt} = \frac{\partial v}{\partial \dot{q}}
    $$
    $$
    \frac{d}{dt}\frac{\partial r}{\partial q} =  \frac{d}{dt} \frac{\partial vdt}{\partial \dot{q}dt} = \frac{\partial v}{\partial q}
    $$
   </div> 
   which leads to 
   <div class="equation">
    $$
    Q_h = ma \frac{\partial r}{\partial q} = m \frac{d}{dt} (v \frac{\partial r}{\partial q}  ) -   m v \frac{d}{dt} (\frac{\partial r}{\partial q} )
    $$
    $$
    = m \frac{d}{dt} (v \frac{\partial v}{\partial \dot{q}} ) - m v \frac{d}{dt}\frac{\partial v}{\partial q}
    $$
    $$
    =  \frac{d}{dt} \frac{\partial}{\partial \dot{q}} \frac{1}{2} m v^2   - \frac{\partial}{\partial q} \frac{1}{2} m v^2  
    $$
    $$
    =  \frac{d}{dt} \frac{\partial T}{\partial \dot{q}}   - \frac{\partial T}{\partial q} 
    $$.
   </div>
   These are the Lagrange equations of motion in improper form. 
   If \(Q_h \) is conservative, (i.e.  \(Q_h = -\nabla_q V = \frac{\partial V}{\partial q }\) with \(V\) only position dependent), then
    <div class="equation">
     $$
     Q_h = \frac{\partial V}{\partial q } = \frac{d}{dt} \frac{\partial T}{\partial \dot{q}}   - \frac{\partial T}{\partial q} 
     $$
     $$
     = \frac{\partial V}{\partial q } + \frac{d}{dt} \frac{\partial V}{\partial \dot{q}}
     $$
    </div>
    Since \(\frac{\partial V}{\partial \dot{q}} = 0\) for conservative force fields,
    we obtain the Lagrangian 
    <div class="equation">
        $$
        0 = \frac{d}{dt} \frac{\partial T - V}{\partial \dot{q}}   - \frac{\partial T - V}{\partial q} 
        $$
        $$
        = \frac{d}{dt} \frac{\partial L }{\partial \dot{q}}   - \frac{\partial L }{\partial q} 
        $$.
    </div>
    If  \(Q_h = \frac{\partial V}{\partial q } + Q_h'\), this becomes
    <div class="equation">
        $$
        Q_h' = \frac{d}{dt} \frac{\partial L }{\partial \dot{q}}   - \frac{\partial L }{\partial q} \frac{1}{2}
        $$,
    </div>
    where \(Q_h'\) is the non-conservative part of the generalized force.
   From d'Alemberts principle we also obtain apparent forces in accelerated reference systems.
   


   <h3>Apparent Forces</h3>
   For this section we consider two reference systems which give rise to distinct, but equivalent coordinated \( r \) and \( r' \).
   Let \( r \) correspond to a fixed and \( r' \) to a moving system whose origin is denoted by \( c \)  .
   We might equally well use generalized coordinated \(q\) and \(q'\) for the two systems.
   Consider the relations
    <div class="equation">
        $$
        r = r' + c
        $$,
        $$
        \ddot{r} = \ddot{r'} + \ddot{c}
        $$
    </div> leading to the newtonian forces
    <div class="equation">
        $$
        F' = ma' = m \ddot{r'} = m \ddot{r} - m \ddot{c}
        $$.
    </div> Here \( m \ddot{c} \) corresponds to the inertial forces of the moving system and \( m\ddot{r'} \) 
    to the inertial forces of a point mass measured from the moving system.  
    Correspondingly, \( m \ddot{r} \) are the inertial forces measured from the fixed system.
    The term \( m \ddot{c} \) is called the einstein force.
    The Einstein force becomes an apparent force because it is present only in the moving system.
    Consider now that a rotating reference system´whose origin overlaps with the fixed origin.
    For a vector \(B\) viewed as fixed from the rotating system we have the relations
    <div class="equation">
        $$
        r = r'
        $$,
        $$
        dB = (\Omega \times B) dt
        $$,
    </div> where \(\Omega\) is the angular velocity vector of the rotating system.
    Thus 
    <div class="equation">
        $$
        \frac{dB}{dt} = \Omega \times B 
        $$,
    </div>
    Denote by \( \frac{dB'}{dt} \) the change of \(B\) viewed from the moving system. 
    Then
    <div class="equation">
        $$
        \frac{dB}{dt} = \Omega \times B + \frac{dB'}{dt}
        $$.
    </div>
So we obtain (since r = r')
<div class="equation">
    $$
    v = \Omega \times r' + v'
    $$.
</div>
and
<div class="equation">
    $$
    \frac{dv}{dt} 
    $$
    $$
    = \frac{dv'}{dt} + \dot{\Omega} \times r' + \Omega \times v' 
    $$
    $$
    = \frac{dv'}{dt} +2 \Omega \times v' +  \Omega \times ( \Omega \times r') +  \dot{\Omega}  \times r'
    $$.
</div>
By multiplication with the mass \(m\) we obtain the inertial forces in the rotating system
<div class="equation">
    $$
    I  = I' + 2m \Omega \times v' +  m\Omega \times ( \Omega \times r') + m\Omega \times r'
    $$.
</div>
We write \( B = 2m \Omega \times v' = 2mv' \times \Omega\) 
and \( C = m\Omega \times ( \Omega \times r') = m \omega^2 r_{\perp}'\) and \( K = \dot{\Omega}  \times r' \).
The centrifugal force \(C\) is derivable from the position dependent scalar function \( \Phi_C = \frac{1}{2} m \omega^2 r_{\perp}^2 \)
 and is thus a conservative force.
The term \(B\) corresponds to the corriolis force. 
It is not derivable from a position dependent scalar function and is thus non-conservative.
However, it is derivable from a scalar function \( \Phi_B = m v' \times \Omega r' \) which is linear in the velocities as
\(B = \frac{d}{dt} \frac{\partial  \Phi_B}{\partial \dot{r}} - \frac{\partial  \Phi_B}{\partial r} \).
Thus it is nonetheless monogenic.
The term \(K\) is the euler force, it arises only for non-uniform rotations.
The term \(I'\) is the inertial force in the moving system.
The total effective force is
<div class="equation">
    $$
    F_{total}  = F + I' + C + B + K
    $$,
</div> where \(F\) is the impressed force onto the particle.


<h2>From D'Alemberts principle to the Lagrangian by variational considerations</h2>
   D'Alemberts principle is a powerful tool to derive the equations of motion for a system. 
   However, it is not in the for of a definite integral.
   This form is 
   <div class="equation">
    $$
    I = \int F(y,y',x)dx
    $$
   </div>
  where \( F(y,y',x) \) is any function of three variables. 
  By the calculus of variation, one can solve analytically for the stationary value of this integral. 
  Also if \( F(y,y',y'',x) \) contains \( 4 \) variables including the second derivative. 
  However, for we will not consider this case.
  The advantage of a formulation as stationary value of an integral lies in the analytical solution which can be obtained.
  Consider the integral 
  <div class="equation">
    $$
    I = \int F(y,y',x)dx
    $$
   </div>
   for which we want to find \(y = f(x)\) which makes the integral an extremum (or at least stationary) 
   with boundary conditions \( f(a) = \alpha \) and \( f(b) = \beta \). 
   Consider \( z_k = \frac{\Delta y}{\Delta x}|_{x=x_k} =\frac{ y_{k+1} - y{k} }{ x_{k+1} - x{k} } \).
   In this discrete formulation the integral becomes a sum 
    <div class="equation">
     $$
     I = \sum_k F(y_k, z_k, x_k) \Delta x = \sum_k F(y_{k+1}, z_k, x_k) \Delta x
     $$.
    </div>
    The last equality follows from the fact that in the limit \( y_{k+1}=y_{k} \).
    Partial differentiation w.r.t \(y_{k+1}\) leads to
    <div class="equation">
        $$
        \frac{\partial F}{\partial y} (x_{k+1} - x{k}) + \frac{\partial F}{\partial y'}|_{x=x_{k}} -\frac{\partial F}{\partial y'}|_{x=x_{k+1}} 
        $$
        $$
        =   \frac{\partial I}{\partial y}
        $$
    </div>
    which through multiplication  by  \( \frac{d}{dx} = \lim_{x_{k+1} - x{k} \rightarrow 0} \frac{1}{x_{k+1} - x{k}} \) leads to
    <div class="equation"> 
        $$
        \frac{\partial I}{\partial y} \frac{d}{dx} = \frac{\partial F}{\partial y} - \frac{d}{dx}\frac{\partial F}{\partial y'}
        $$.
    </div>
    Thus the stationary value of a definite integral is found when 
    <div class="equation"> 
        $$
    \frac{\partial F}{\partial y} - \frac{d}{dx}\frac{\partial F}{\partial y'} = 0
        $$.
    </div> 
    This is a necessary and sufficient condition.
    In this intuitive derivation we have considered \(x\) as the independent variable.
    In the Lagrangian formulation of mechanics, often the time is the independent variable. 
    However, extensions where time is considered as a position variable are possible.
    Here another independent variable \(\tau\) is required and all positional variables (including time) are considered functions of \(\tau\).
    <br><br>
    Let us consider 
    <div class="equation">
        $$
        \delta I = \int \delta F(y,y',x) d\tau = \epsilon \int \frac{\partial F}{\partial y}\Phi + \frac{\partial F}{\partial y'}\Phi' dx
        $$
    </div>
    where \( \delta F(y,y',x) = F(y + \epsilon \Phi,y'+  \epsilon \Phi', x)  - \delta F(y,y',x) = \epsilon  (\frac{\partial F}{\partial y}\Phi + \frac{\partial F}{\partial y'}\Phi' ) \)
    and \(\Phi\) is an arbitrary function.
    Thus
    <div class="equation">
        $$
        \delta \frac{I}{\epsilon} = \int \frac{\partial F}{\partial y}\Phi + \frac{\partial F}{\partial y'}\Phi' d\tau
        $$
    </div>
    and through integration by parts
    <div class="equation">
        $$
         \int  \frac{\partial F}{\partial y'}\Phi' dx = [ \frac{\partial F}{\partial y'}\Phi]_{t_1}^{t_2} - \int \frac{d}{d\tau} \frac{\partial F}{\partial y'}\Phi dx
        $$
    </div>
    we obtain
    <div class="equation">
        $$
        \delta \frac{I}{\epsilon} = \int (\frac{\partial F}{\partial y} - \frac{d}{d\tau} \frac{\partial F}{\partial y'}) \Phi dx +  [ \frac{\partial F}{\partial y'}\Phi]_{t_1}^{t_2}
        $$
    </div>
    <br><br>
    D'Alemberts principle can be transformed into such a definite integral by integration with respect to time.
    Consider the time integrated work function with a conservative force
    <div class="equation">
    $$
    \delta \int  w dt = \int \sum_i ( \delta F_i - \frac{d}{dt}(m_iv_i) ) \delta r_i dt
    $$
    </div>
    For the term corresponding to the impressed forces we have
   <div class="equation">
    $$
    \int \sum_i F_i dt = \int - \nabla V dt.
    $$
   </div>
   For the term corresponding to the inertial forces we have
   <div class="equation">
    $$
    \int \sum_i \frac{d}{dt}(m_iv_i) \delta r_i dt =  -[m_iv_i \delta r_i]_{t_1}^{t_2} + \int m_i v_i \frac{d}{dt} \delta r_i dt 
    $$
    $$
    = -[m_iv_i \delta r_i]_{t_1}^{t_2} +  \int m_i v_i \delta \frac{d}{dt} r_i dt
    $$
    $$
    = -[m_iv_i \delta r_i]_{t_1}^{t_2} +  \int m_i v_i \delta v_i dt
    $$
    $$
    = -[m_iv_i \delta r_i]_{t_1}^{t_2} +  \frac{1}{2} \int m_i \delta v_i v_i dt
    $$
    $$
    = -[m_iv_i \delta r_i]_{t_1}^{t_2} +  \frac{1}{2} \delta \int m_i v_i^2 dt
    $$.
</div>
 Thus we obtain 
<div class="equation">
        $$
        \int \delta w dt  = \int - \delta V dt  -[m_iv_i \delta r_i]_{t_1}^{t_2} +  \frac{1}{2} \delta \int m_i v_i^2 dt
        $$
        $$
        = \delta \int T dt - \delta \int V dt - [m_iv_i \delta r_i]_{t_1}^{t_2} = \delta \int T-V dt - [m_iv_i \delta r_i]_{t_1}^{t_2}
        $$
        $$
        =  \delta \int L dt - [m_iv_i \delta r_i]_{t_1}^{t_2}
        $$
</div>
   If we vary between definite limits, the boundary term vanishes because at the limits the variation is zero.
   In the derivation above we consider a parameterization in the real world position coordinates. 
   We can also consider a parameterization in the generalized coordinates \(q\), so that \(L(q_1,...,q_n; q_1',...,q_n')\) instead of \(L(r_1,...,r_n; r_1',...,r_n')\), 
   leading to
   <div class="equation">
     $$
     \delta \int w dt =  \delta \int L(q_1,...,q_n; q_1',...,q_n') dt + [\frac{\partial L}{\partial q_i} \delta q_i]_{t_1}^{t_2}
    $$.
   </div>
   If \(q\) corresponds to \(r\), this corresponds to \( \delta \int w dt = \delta \int L dt - [m_iv_i \delta r_i]_{t_1}^{t_2} \) obtained by time integration of D'Alemberts principle.
   Note that the boundary term vanishes if the variation is zero at the limits (which is often the case). 
   Furthermore, being a constant, it has no effect on the stationary value.
   Now we can reformulate the principle of d'Alembert as the stationary value of a definite integral.
   A particle in motion is in equilibrium if
   <div class="equation">
    $$
    \int \delta w dt = \delta \int L dt =  \delta A = 0
    $$
   </div>
   where \( A \) is called the action functional. 
   This is Hamiltions principle of least action. 
   Here we have assumed that the work done by the forces is derivable from a single scalar function. 
   The impressed forces must be monogenic.
   If they are conservative, they are automatically monogenic. 
   However, also non-conservative and time-dependant forces can be monogenic. 
   For polygenic forces the transformation of d'Alemberts principle into a definite integral is not possible.
   By the calculus of variation for the stationary value of definite integrals we obtain the necessary and sufficient condition as the Lagrange equations of motion
   <div class="equation">
    $$
    \frac{\partial L}{\partial q_i} - \frac{d}{dt} \frac{\partial L}{\partial q_i'} = 0
    $$.
   </div>
   <br><br>
   Advantages over D'Alemberts principle are that the equations of motion do not contain the accelerations, but only the velocities.
   The equations of motion are of first order in time, not second order and completely determined by a scalar function /(L(q,q')/).
   The principle of least action relates motion to the stationary value of /( \delta \int L(q,q') dt/).
 
   If we consider the secial variation \(\delta q = \epsilon \dot{q} \) can obtain  the condition 
   <div class="equation">
    $$
    \delta \int w dt =   \int \epsilon \dot{L}(q_1,...,q_n; q_1',...,q_n') dt + \epsilon [\frac{\partial L}{\partial \dot{q}_i}  \delta q]_{t_1}^{t_2} = 0
   $$
  </div>
    which leads to
    <div class="equation">
    $$
     [ L(q_1,...,q_n; q_1',...,q_n') ]_{t_1,t_1}  - [\frac{\partial L}{\partial q_i}  \dot{q}]_{t_1}^{t_2} = 0
   $$.
    </div>
Since \(t_1\) and \(t_2\) are arbitrary and independent, we obtain the condition
   <div class="equation">
        $$
        L - \sum_i p_i \dot{q}_i = const.
        $$,
    </div> where /( p_i = \frac{\partial L}{\partial \dot{q}_i} /).

    If /( T = \frac{1}{2} \sum_{i,k} a_{i,k} \dot{q}_i \dot{q}_k /) and /(V/) is indepenend from /(\dot{q}_i/), 
    then /(p_i = \frac{ \partial T}{ \partial \dot{q}_i}/) and /( \sum_i p_i \dot{q}_i = 2T /).
    The equation above becomes
    <div class="equation">
        $$
    2T - ( T - V) = T + V = 0
        $$
    </div>
    which is the law of the conservation of energy. Note that we requires \(L\) to be independent from time 
    and \(V\) to be independent from the velocities \(\dot{q}_i\). 
    Furthermore we require \(T\) to be of quadratic form in the velocities. 
    In general relativity the kinetic energy depends on the velocities in more complicated ways. 
    When we encounter gyroscopic terms the potential energy also depends on the velocities. However the conservation law
    <div class="equation">
        $$
        L - \sum_i p_i \dot{q}_i = const. = E
        $$
    </div> holds even for these systems, if they are time-independent. 
    The interpretation of the constant of motion is the energy of the system.
    For kinetic energies quadratic in the velocities \(\sum_i \p_i \dot{q}_i\) is twice the kinetic energy. 






<h3>Elimination of variables in the Lagrangian</h3>

We have introduced the quantities \(p_i = \frac{\partial L}{\partial \dot{q}_i}\) (called momentum) so that \(p_i' = \frac{\partial L}{\partial q_i}\). 
If \(q_i\) is an ingorable variable, then \(\dot{p}_i = 0 \) and \(p_i = const.\). 
The momentum associated with the ignorable variable is preserved.
We have 
<div class="equation">
    $$
    \delta \int L(q,\dot{q}) dt = [ \sum_i \frac{ \partial L }{ \partial \dot{q}_i } \delta q_i ]_{t_1}^{t_2} =  [ p_n \delta q_n]_{t_1}^{t_2} 
    = p_n \delta \int q_n' dt =  \delta \int p_n q_n' dt
    $$
</div>
where we consider the variation of all non-ignorable variables to be zero at the limits.
This leads to 
<div class="equation">
    $$
    \delta \int (L - p_n q_n') dt = 0
    $$.
</div>
We call 
<div class="equation">
    $$
    \tilde{L} = L - p_n q_n' = L - c_n q_n'
    $$
</div> the modified lagrangian. The new action integral is /(A = /int \tilde{L} dt /).
If there is a kinetic coupling between ignorable and non-ignorable variables, we obtain additional terms which can be interpreted as 
gyroscopic energy terms (linear in velocities).















<h3>Energy as Momentum associated to Time - Time as ignorable variable</h3>

Here we will consider a Lagrangian which has time as ingorable variable.  
Up until now we considered the time \(t\) as an independent variable. Now we will consider \(q_i\), \(q_i'\), \(t\) 
as functions of some independent parameter \( \tau \).
Thus
<div class="equation">
    $$
     A = \int_{\tau} L(q_1,...,1_n; \frac{q_1'}{t*},...,\frac{q_n'}{t*}) t* d\tau
    $$
</div>
since we have /( \frac{ dq*}{dt*} = \frac{dq*}{d\tau}\frac{d\tau}{dt*}  /). Then
<div class="equation">
    $$
     p_t = \frac{\partial L t*}{\partial t*} = L - \sum_{i}^{n} \frac{\partial L}{\partial \dot{q_i}} \frac{q_i'}{t*^2}t* 
     = L - \sum_{i}^{n} p_i \dot{q_i} = -E
    $$.
</div>
If \(t\) is ignorable (i.e. the system is conservative), then \(p_t = const. = -E\).
The modified lagrangian is 
<div class="equation">
    $$
    \tilde{L} = Lt* - p_t t* = (L - p_t)t* = \sum_{i}^{n} p_i \dot{q_i} t*
    $$.
</div>
leading to the action integral
<div class="equation">
    $$
    A = \int_{\tau} \sum_{i}^{n} p_i \dot{q_i} t* d\tau =  \int_{\tau} T t* d\tau 
    $$.
</div> The latter equality holds if \(T\) is quadratic in the velocities and \( V\) is only position dependent. 
The kinetic energy can also be written as
leading to the action integral
<div class="equation">
    $$
   T = \frac{1}{2} \frac{\bar{ds}}{dt}^2
    $$
</div>
which due to the parameterization in terms of /( \tau /) is written as
<div class="equation">
        $$
       T = \frac{1}{2} \frac{\bar{ds}}{d\tau}^2 / t*^2
        $$.
</div>
Thus
<div class="equation">
    $$
    t* = \frac{ 1 }{ \sqrt{2(E-V)} } \frac{ \bar{ds}}{d\tau} 
    $$
</div>
and by subsitution we obtain
<div class="equation">
    $$
    A =  \int_{\tau} \sqrt{2(E-V)} frac{\bar{ds}}{d\tau} d\tau = \int_{\tau} \sqrt{2(E-V)} \bar{ds}
    $$.
</div> Note that the free parameter is \( \tau \). Define \(d\sigma^2 = (E-V) \bar{ds}^2\). 
Then the action integral becomes \( A = \int_{\tau} d\sigma^2 \), 
which relates the motion of the particle to the motion along some geodsic of a given Riemannian space. 
The time does not appear in the equations, but can be solved for by the given relation \( t* = f(\cdot)\).
The Riemannian line-element might be written as \( \bar{ds}^2 = sum_{j,k} a_{j,k} \dot{q}_j \dot{q}_k \).













<h3>Small Vibrations about a state of equilibrium</h3>
Consider the kinetic energy 
<div class="equation">
    $$ 
    K = \frac{1}{2} \sum_{i,k} a_{i,k} \dot{q}_i \dot{q}_k = \frac{1}{2} \dot{q}^T A \dot{q} \
    $$
</div>
and a Taylor-expansion of the potential energy about a state of equilibrium
<div class="equation">
    $$
    V = V(q_0) + \sum_{i} \frac{\partial V}{\partial q_i}(q_i - q_{0,i}) + \sum_{i} \frac{1}{2} \frac{\partial^2 V}{\partial q_i^2} (q_i - q_{0,i})^2 + O(|3|)
    $$.
</div>
Since, for monogenic forces derivable from \(V\), at the state of equilibrium \(  \frac{\partial V}{\partial q_i} = 0\) 
(by the vanishing of the virtual work in directions tangent to the constraint and ideality of constraints) for all \(i\) and \(V(q_0) = const. \)
, we obtain
<div class="equation">
    $$
    V =   \frac{1}{2} \sum_{i,k} \frac{\partial^2 V}{\partial q_i \partial q_k} q_iq_k 
    = \frac{1}{2} \sum_{i,k}b_{i,k}q_i q_k  = \frac{1}{2} q^T B q
    $$.
</div>
We obtain the linearized Lagrangian
<div class="equation">
    $$
    L =    \frac{1}{2} \dot{q}^T A \dot{q} - \frac{1}{2} q^T B q
    $$
</div>
with equations of motion (i.e. minimum of the action integral)
<div class="equation">
    $$
    A \ddot{q} + B q = 0
    $$.
</div>
These equations are linear homogenous and the superposition principle holds. 
Since \(A\) is positive definite, it is possible to diagonalize both matrices simultaneously. 
In fact \(A\) can be diagonalized to the identity. The eigenvalues are the roots of 
<div class="equation">
    $$
    det(B - \lambda A) = 0
    $$
</div>
and the eigenvectors are so that \( u^{(i)} A u^{(j)} = \delta_{i,j} \) and \( (U^T B U)_{i,j} = \lamba_i \delta_{i,j}\).
By a change of coordinates \( \bar{q} = Uq \) we obtain the diagonalized equations of motion
<div class="equation">
    $$
    \bar{A} \ddot{\bar{q}} + \bar{B} \bar{q} = 0
    $$
</div>, where \(\bar{A} = I \) and \(\bar{B} = U^T B U = \text{diag}(\lambda_1,...,\lambda_n)\). 
We know that for a differential equation of form
<div class="equation">
    $$
    \ddot{x} = - \lambda x
    $$
</div>
the solution is
<div class="equation">
    $$
    x(t) = \cos(\omega*t)
    $$
</div> with \(\omega = \sqrt{\lambda}\) since \( \frac{d^2}{dt^2} \alpha*\cos(\omega t + \Phi ) = -  \alpha* \omega^2 \cos(\omega t + \Phi) \).
Thus, the general solution for the linearized equations of motion is
<div class="equation">
    $$
    \bar{q}_i(t) = \sum_{i} \alpha_i \cos(\omega_i t + \Phi_i)
    $$,
</div> in where \( \bar{q}_i(t) \) caputres the time-dependent motion of the system in the direction of the eigenvector \(u_i\).
We can obtain the general solution for the original coordinates \(q_i(t)\) by the inverse transformation \(q = U^T \bar{q}\).















<h2>Canonical transformations and Phase Space</h2>

By applying a Legendre transform to the Lagrangian we can obtain the Hamiltonian.
A legendre transform assumes as starting point any function \( F(q_1,....,q_n) \) 
and introduces the new variable \( v_i = \frac{\partial F}{\partial u_i}\).
The new function is then \( G = \sum_i v_i u_i - F = G(v_1,...,v_n) \).
Let us examine the variation of the new function
<div class="equation">
    $$
    \delta G = \sum_i \frac{\partial G}{\partial v_i} \delta v_i
    $$
    $$
    = \sum_i (u_i \delta v_i + v_i \delta u_i) - \delta F
    $$
    $$
    = [u_i \delta v_i + (v_i - \frac{\partial F}{\partial u_i}) \delta u_i] 
    $$
    $$
    = u_i \delta v_i 
    $$
</div> where the last equality follows from the definition of the new variable \(v_i\).
We obtain 
<div class="equation">
    $$
    u_i = \frac{\partial G}{\partial v_i} \text{ and }    v_i = \frac{\partial F}{\partial u_i}
    $$
    $$
    G = \sum_i v_i u_i - F \text{ and } F = \sum_i u_i v_i - G
    $$
    $$
    G(v_1,...,v_n) \text{ and } F(u_1,...,u_n)
    $$
</div> 
This transformation is symmetrical. Not all variables need to participate in the transformation.
Application to the Lagrangian leads to
<div class="equation">
    $$
    p_i = \frac{\partial L}{\partial \dot{q}_i} \text{ and }   \dot{q}_i = \frac{\partial F}{\partial p_i}
    $$
    $$
    H = \sum_i p_i \dot{q}_i - L \text{ and } L = \sum_i p_i \dot{q}_i  - H
    $$
    $$
    H(q_1,...,q_n, p_1,...,p_n;t) \text{ and } L(q_1,...,q_n, \dot{q}_1,...,\dot{q}_n;t)
    $$.
</div> 
Note that \(H\) is of first order in all its variables and thus defines a \(2n\)-dimensional hypersurface in the \(2n+1\)-dimensional phase space.
We can write the equations of motion in the Hamiltonian form
<div class="equation">
    $$
    \dot{q}_i = \frac{\partial H}{\partial p_i} 
    $$
    $$
     \dot{p}_i = - \frac{\partial H}{\partial q_i}
    $$.
</div> Since \(q_i\) and \(p_i\) are positional variables, the Hamiltonian equations of motion only contain time on the left-hand side. 
This is opposed to the Lagrangian equations of motion which express velocities (not positions) as functions of time.
Remeber that the coefficient of \(\delta p_i \) is zero due to the legendre transform. Thus we may write
<div class="equation">
    $$
    \delta A = \int \delta L dt = \int \delta (\sum_i p_i \dot{q}_i  - H) dt
    $$
</div>
which is minimized by
<div class="equation">
    $$
    \frac{d}{dt} \frac{\partial L}{\partial \dot{q}_i} - \frac{\partial L}{\partial q_i} =  \frac{dp_i}{dt} - \frac{\partial H}{\partial q_i} = 0
    $$
    $$
    \frac{d}{dt} \frac{\partial L}{\partial \dot{p}_i} - \frac{\partial L}{\partial p_i} = 0 - \dot{q}_i + \frac{\partial H}{\partial p_i} = 0
    $$
</div> which gives rise to the equation of motion in Hamiltonian and Lagrangian form. 
The transformation into \(2n\) positional space is powerful since it allows for the definition of a velocity field in the phase space.
Contrary to the Lagrangian equations of motion, the Hamiltonian equations of motion are of first order in time 
and the behavious of the phase space is similar to that of an incompressible fluid. 
In incompressible fluids, certain integral invaraits are preserved, for example the circulation and the volume.
If we allow for a variation at the limits we have
<div class="equation">
    $$
    \delta A =  [ \sum_i \delta p_i \delta{q}_i ]_{t_1}^{t_2} 
    $$
</div> (recall that the coefficient of \(\delta p_i \) is zero so that this relation holds always). 
In the Hamiltonian form, ignorable variables are handled by replacing \(p_n\) with a constant. Then the action integral is reduced to
<div class="equation">
    $$
    \delta A =  \int \delta L dt = \int \delta (\sum_{i=^1}^{n-1} p_i \dot{q}_i  - H) dt = 0
    $$
</div>, since \( \int \ p_n  \dot{q}_n  dt = C_n [q_n]_{t_1}^{t_2} \) is constant and can be dropped in the variation.








<h2>Time as mechanical variable</h2>
Given the notion of the phase space we can include time as a position variable in the phase space and consider an independent parameter \( \tau \) 
for path parameterization. We call the phase space including time the extended phase space. 
Time is simply regarded as a positional variable with an associated momentum \( p_t \).
As before we can write
<div class="equation">
    $$
    A= \int L(q_1,...,q_n, \frac{q_1'}{q_{n+1}'},..., \frac{q_n'}{q_{n+1}'}, q_{n+1}') q_{n+1}' d\tau = \int L_1 d\tau.
    $$
</div>
By Eulers theorem on homogenous functions we have
<div class="equation">
    $$
    \sum_{i=1}^{n+1} \frac{\partial L_1}{\partial q_i'} q_i' = L_1
    $$
</div>
so that 
<div class="equation">
    $$
    \sum_{i=1}^{n+1} \frac{\partial L_1}{\partial q_i'} q_i' -  L_1 = H_1 = 0
    $$
</div>
and therefore
<div class="equation">
    $$
    A = \int \sum_{i=1}^{n+1} \frac{\partial L_1}{\partial q_i'} q_i' d\tau = \int sum_{i=1}^{n+1}p_i q_i' d\tau
    $$.
</div> Here the Hamiltionan vanishes. It is however replaced by an auxiliary condition which captures the relation
 between the \(q_i\) and \(p_i\). We denote this relationship by 
 <div class="equation">
    $$
   K(q_1,...,q_{n+1}; p_1,....,p_{n+1}) = 0
    $$.
</div>
The integral \(A\) is to be made stationary under this constraint. By adding the time to the phase space, every system becomes conservative.
We can incorporate the constraint into the integral by the \(\lambda\) method and obtain
<div class="equation">
    $$
    \bar{A} = \int \sum_{i=1}^{n+1}p_i q_i' - \lambda K d\tau
    $$.
</div>
By proper choice of \(\tau\) we can set \( \lambda = 1\) and the form of the form
<div class="equation"></div>
    $$
    \bar{A} = \int \sum_{i=1}^{n+1}p_i q_i' - \lambda K d\tau
    $$.
</div>
By the stationary value of a definite integral we obtain the equations of motion
<div class="equation"></div>
    $$
    q_k' = \frac{\partial K}{\partial p_k} 
    $$
    $$
    p_k' = - \frac{\partial K}{\partial q_k}
    $$.
</div>
If \(K = p_{n+1} + H = p_t + H\), then the equations of motion are 
<div class="equation"></div>
    $$
    q_k' = \frac{\partial H}{\partial p_k} 
    $$
    $$
    p_k' = - \frac{\partial H}{\partial q_k}
    $$
    $$
    q_{n+1}' = 1
    $$
    $$
    p_{n+1}' = - \frac{\partial H}{\partial q_{n+1}}
    $$
</div>
<h2>Canonical Transformations</h2>
The equations derived up until here are not neseccarily easy to solve. Transformations can help to simplify the equations.
A transformation is called canonical if it preserves the action integral. Then also the equations of motion are preserved.
The equations of motion  
<div class="equation"></div>
    $$
    \dot{q}_i = \frac{\partial H}{\partial p_i} 
    $$
    $$
    \dot{p}_i = - \frac{\partial H}{\partial q_i}
    $$
</div> are obtained from a Lagranian in canonical form \(L = \sum_i p_i \dot{q}_i - H \/). 
This form is preserved if \( \sum_i p_i \partial q_i = \sum_i P_i \partial Q_i \). 
Just like the Lagrangian, the Hamiltonian is invariant to point-transformations.
If time is included in the phase space, the Hamiltonian is invariant to point-transformations in the extended phase space. 
We have
<div class="equation"></div>
    $$
    \dot{q}_i = \frac{\partial H}{\partial p_i} + p_t \partial t
    $$
    $$
    \dot{p}_i = - \frac{\partial H}{\partial q_i} + p_\bar{t} \partial \bar{t}
    $$
</div>
corresponding to \( K = p_t + H \). In this case \(K\) is invariant to point-transformations, but not \(H\).
We have \(H' = H + p_t - p_\bar{t} \).
The invariance principle \( \sum_i p_i \partial q_i = \sum_i P_i \partial Q_i \),
requires at least one additional functional relation \( f(q_1,...,1_n, Q_1,...,Q_n) = 0 \),
 else all the \(p_i\) and \(P_i\) would vanish due to the independent arbitrary variations.
Prescription of these constraints classifies a general Mathieu transformation. 
We can have up to \(n\) such constraints, leading to more or less restricted forms.
By the Lagrangian \(\lambda\) method we can incorporate the constraints 
<div class="equation"></div>
    $$
    \sum_i p_i \partial q_i - \sum_i P_i \partial Q_i  = \lambda_1 \partial f_1 + ... + \lambda_n \partial f_n
    $$
</div>
allowing for arbitrary variations of the /(q_i/) and /(Q_i/). 
We obtain 
<div class="equation"></div>
    $$
     p_i =  \lambda_1 \frac{\partial f_1}{\partial q_i} + ... + \lambda_n \frac{\partial f_n}{\partial q_i}
    $$
    $$
     P_i =  -\lambda_1 \frac{\partial f_1}{\partial Q_i} - ... - \lambda_n \frac{\partial f_n}{\partial Q_i}
    $$.
</div>
These equations characterize the transformation completely. If we add time to the position variables, we obtain one further equation
<div class="equation"></div>
    $$
     p_t - p_\bar{t} =  \lambda_1 \frac{\partial f_1}{\partial t} + ... + \lambda_n \frac{\partial f_n}{\partial t}
    $$
</div>
so that, in extended phase Space
<div class="equation"></div>
$$
 H' =  H + \lambda_1 \frac{\partial f_1}{\partial t} + ... + \lambda_n \frac{\partial f_n}{\partial t}
$$
\sum p_i \partial q_i = \sum P_i \partial Q_i + \partial S
</div>
where \(S = \lambda_1 f_1 + ... + \lambda_n f_n \) is a differential of a certain function \(S\).
The transformed action integral (we consider time independence and actual displacements) is then
<div class="equation"></div>
    $$
    A = \int_{t} \sum_i p_i dq_i - H' dt = \int \sum_i P_i dQ_i - Hdt + \int_{t} dS
    $$
</div>, the addition of the last term is constant and does not change the stationary value of the action integral.
We have the relation
<div class="equation"></div>
    $$
    \sum_i p_i  \delta  q_i  - \sum_i P_i  \delta Q_i  = \delta S = \sum ( \frac{\delta S}{\delta q_i} \delta q_i + \frac{\delta S}{\delta Q_i} \delta Q_i)
    $$.
</div>
If we inculde \(t\) in the phase space, we obtain
<div class="equation"></div>
    $$
    \sum_i p_i  \delta  q_i + p_t \delta t - \sum_i P_i  \delta Q_i  - p_\bar{t} \delta \bar{t}   = \delta S
    $$
</div>
so that 
<div class="equation"></div>
    $$
    p_t - p_\bar{t}   = \frac{ \partial S }{ \partial t  }
    $$
</div>
and
<div class="equation"></div>
    $$
    H'   = H + \frac{ \partial S }{ \partial t  }
    $$.
</div>
Other ways of ensuring a canonical transformation is by properties of the phase-space. 
As mentioned before, the phase-space behaves like an incompressible fluid. 
It has integral invariants such as the circulation. This can be related to the Poisson brackets.
A canoncial transformation leaves the Poisson brackets invariant.
While the generating function \(S\) gives the transformations only in implicit form, 
the Poisson brackets can be used to test if a transformation is canonical.



<h3>Infinitesimal canoncical transformations</h3>




</body>
    </html>
        